<?xml version="1.0" encoding="UTF-8"?>

<project name="Dunamis" basedir="." default="build_dunamis">
	
	<!-- The target that calls all the other targets so we dont have to -->
	<target name="dunamis_properties" depends="properties_files, properties_system" />
	
	<!-- Function Import -->
	<import file="functions/build_changelog.xml" />
	<import file="functions/create_release.xml" />
	<import file="functions/repl_dir.xml" />
	<import file="functions/repl_file.xml" />
	<import file="functions/zipr_file.xml" />
	
	<!-- File Import -->
	<target name="properties_files">
		
		<property name="dunamis.config.bamboo" location="config.bamboo" />
		<property file="${dunamis.config.local}" prefix="dunamis.local" />
		
		<property name="dunamis.config.project" location="config.project" />
		<property file="${dunamis.config.project}" prefix="dunamis.project" />
		
	</target>
	
	<target name="properties_system">
		
		<!-- System Level Properties -->
		<property name="dunamis.src.dev" value="${dunamis.local.LOCATION_ROOTDIR}/branches/1.2" />
		<property name="dunamis.dst.build" value="${dunamis.local.LOCATION_BUILDDIR}" />
		<property name="dunamis.src.build" value="${dunamis.dst.build}" />
		
		<tstamp>
			<format property="dunamis.TODAY" pattern="yyyy MMMM d" />
			<format property="dunamis.RELDATE" pattern="yyyy-MM-dd" />
		</tstamp>
		
		<property name="server.root" value="${dunamis.local.LOCATION_LOCALHOME}" />
		<property name="server.whmcs" value="${server.root}/hosting/" />
		<property name="server.joomla" value="${server.root}/" />
		
	</target>
	
	<target name="testserver_deploy" depends="properties_files, properties_system">
		<dunamis.repl_dir />
	</target>
	
	
	
</project> 